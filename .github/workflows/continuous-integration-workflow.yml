on: [push, pull_request]

jobs:
    build:
        name: Linux

        runs-on: ${{ matrix.os }}
        strategy:
            matrix:
                os: [ubuntu-16.04, ubuntu-18.04]

        steps:
            - run: cd .. && git clone https://github.com/mcabioch/uqac_openstego.git
            - run: git checkout actions
            - run: ./compile
            - run: cd src/ && java com/openstego/desktop/OpenStego --help
    build:
        name: Windows

        runs-on: ${{ matrix.os }}
        strategy:
            matrix:
                os: [windows-latest]

        steps:
            - run: cd .. & git clone https://github.com/mcabioch/uqac_openstego.git
            - run: git checkout actions
            - run: ./compile
            - run: cd src/ & java com/openstego/desktop/OpenStego --help
